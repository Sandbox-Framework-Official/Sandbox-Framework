<html>

<head>
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<link rel="stylesheet" href="css/style.css" />
</head>

<body>
	<!-- BACKGROUND VIDEO -->
	<div id="overlay">
		<div class="fullscreen-bg">
			<video loop muted autoplay class="fullscreen-bg__video">
				<source src="assets/bgvideo.mp4" type="video/mp4" />
			</video>
		</div>
	</div>
	<!-- END BG VIDEO -->
	<!-- LOGO -->
	<img src="assets/logo.png" class="logo" alt="" />
	<div class="promo">
		<img src="assets/evohost.png" alt="" />
	</div>
	<!-- END LOGO -->
	<h1 class="enable_music">
		Press <strong>SPACEBAR</strong> to toggle music
	</h1>
	<audio id="leson" src="" audio="0.1" autoplay="true" hidden="true" loop="true"></audio>
	<script>

		const isPaused = localStorage.getItem("paused_music") === "true";

		let play = true;
		const myAudio = document.getElementById("leson");

		window.addEventListener('load', (event) => {
			let tunes = new Array(
				"assets/karnage.mp3",
				"assets/czar.mp3",
			)
			let loaded = false;

			// myAudio.addEventListener('loadeddata', function () {
			// 	loaded = true;
			// 	myAudio.play();
			// }, false);

			myAudio.addEventListener('error', function () {
				console.log('error loading audio');
			}, false);

			myAudio.src = tunes[Math.floor(Math.random() * tunes.length)];

			if (isPaused) {
				myAudio.pause();
				play = false;
			}
		});


		myAudio.volume = 0.1;


		function onKeyDown(event) {
			switch (event.keyCode) {
				case 32: //SpaceBar
					if (play) {
						myAudio.pause();
						play = false;
						localStorage.setItem("paused_music", "true");
					} else {
						myAudio.play();
						play = true;
						localStorage.setItem("paused_music", "false");
					}
					break;
			}
			return false;
		}

		window.addEventListener("keydown", onKeyDown, false);

	</script>
	<!-- BG AUDIO -->
	<!-- END BG AUDIO -->
	<!-- LOADING BAR -->
	<div class="loadbar">
		<div class="progressBar"></div>
	</div>
	<script src="js/main.js"></script>
	<!-- END LOADING BAR -->
</body>

</html>